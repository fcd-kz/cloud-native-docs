# Интеграция аудита контента

## Обзор

Аудит контента (также известный как интеллектуальный аудит) помогает выявлять нежелательный или незаконный контент в видео, аудио и встроенном тексте. Он использует AI-модели для обнаружения откровенных изображений, сцен насилия, оружия и других запрещённых материалов. Интеграция аудита позволяет автоматически фильтровать пользовательский контент, соблюдать регуляторные требования и повышать безопасность вашей платформы.

## Типы детекции

Аудит охватывает три направления:

- **Аудит видеoизображений:** Сканирует каждый кадр видео на наличие нежелательных изображений. Категории включают порнографический контент, вульгарные или сексуально намекающие сцены, интимное поведение, оружие (огнестрельное), кровавые или насильственные сцены, взрывы, а также запрещённые иконки или логотипы.
- **Аудит аудио:** Анализирует речь и другие звуки для выявления ключевых слов, связанных с эротикой, насилием или незаконной деятельностью. Для повышения точности в конкретных доменах можно настраивать пользовательские списки ключевых слов.
- **Аудит текста:** Извлекает текст на экране (через OCR) и проверяет его на наличие запрещённых или чувствительных слов. Работает даже с вертикальным или стилизованным текстом.

## Запуск задачи аудита

Задачи аудита можно создавать тремя способами:

1. **Консоль:** Создайте новую задачу обработки VOD, добавьте узел «Intelligent Auditing» и выберите предустановленный шаблон либо настройте категории детекции. Укажите источник входных данных (COS или URL) и выходную директорию, затем отправьте задачу. Для повторяющихся процессов сохраните конфигурацию как оркестрацию.
2. **API:** Вызовите `ProcessMedia` с параметром `AiContentReviewTask`, содержащим ID шаблона и требуемые типы детекции. Укажите источник входных данных, выходное хранилище и путь. Настройте `TaskNotifyConfig` для получения callback-уведомлений по завершении задачи.
3. **Автоматический триггер:** Создайте on-demand оркестрацию с узлом аудита и включите её. При появлении новых медиафайлов в триггерном бакете задачи аудита будут запускаться автоматически.

## Просмотр результатов

- **Callback-уведомления:** После завершения задачи MPS отправляет JSON-уведомление с результатами. Событие содержит списки временных сегментов, в которых были обнаружены нарушения.
- **Консоль:** На странице задач обработки VOD откройте завершённую задачу, чтобы просмотреть отчёт аудита. Отчёт показывает каждое нарушение с временем начала/окончания, категорией и коэффициентом уверенности.
- **Запрос через API:** Используйте `DescribeTaskDetail` с ID задачи для программного получения результатов аудита.

## Best practices

- **Грамотно выбирайте шаблоны:** Для разных категорий контента требуются разные пороги детекции. Используйте пользовательский шаблон, если предустановленные не подходят.
- **Комбинируйте с инспекцией качества:** Запускайте инспекцию качества перед аудитом, чтобы убедиться, что видео корректно декодируется; повреждённые файлы могут приводить к ложным срабатываниям.
- **Обрабатывайте ложные срабатывания:** Для критичного контента вручную проверяйте отмеченные сегменты. Корректируйте пороги или списки ключевых слов на основе обратной связи.
- **Интегрируйте с инструментами модерации:** Используйте callback-уведомления для запуска последующих процессов модерации — например, автоматической блокировки контента, запроса ручной проверки или уведомления авторов.
