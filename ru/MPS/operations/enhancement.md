# Интеграция улучшения аудио и видео

## Обзор

Функция улучшения аудио и видео использует AI-модели обработки Freedom Cloud и бизнес-данные для обеспечения профессионального уровня улучшения видео и звука. Поддерживаются улучшения качества изображения в реальном времени, такие как удаление артефактов, шумоподавление, улучшение цвета, детализации и лиц, преобразование SDR в HDR, а также super-resolution на базе AI-моделей. Улучшение применяется в OTT, электронной коммерции, спортивных трансляциях и других сценариях для повышения как качества восприятия (QoE), так и качества сервиса (QoS).

## Технические преимущества

- **AI-улучшение для всех сценариев:** специализированные алгоритмы для игр, UGC, фильмов высокого разрешения, образования, live-шоу, e-commerce и реставрации старых фильмов.
- **Комплексное улучшение аудио:** шумоподавление речи, разделение аудио, улучшение качества звука и выравнивание громкости значительно повышают разборчивость аудио.

## Создание задач

MPS предоставляет три способа.

### Способ 1 — Консоль

1. В консоли нажмите **Create Task > Create VOD Processing Task**.
2. **Укажите входной файл** из COS/S3 или предоставьте URL.
3. **Добавьте узел Enhancement** в workflow.
4. В окне **Enhancement settings** выберите предустановленный шаблон улучшения. Шаблоны консоли не позволяют настраивать параметры транскодирования (кодек, битрейт, GOP); если требуется тонкая настройка — используйте API.
5. **Укажите выходной путь** и нажмите **Create**.

### Способ 2 — API

Вызовите **ProcessMedia**:

- **Указание ID шаблона:** передайте информацию о входном и выходном хранилище и включите `TranscodeTaskSet`. ID шаблона соответствует шаблону улучшения (например, комплексное улучшение, улучшение цвета, удаление артефактов).
- **Указание ID оркестрации сервиса:** используйте Schedule ID вместо ID шаблона для задач, собранных из оркестрации.

Если требуется точный контроль параметров транскодирования, создавайте пользовательские шаблоны улучшения через API.

### Способ 3 — Автоматический триггер

Для автоматического улучшения видео, загружаемых в COS:

1. Сохраните оркестрацию при создании задачи и настройте триггерный бакет/директорию.
2. Включите оркестрацию в списке. После активации новые файлы, загруженные в директорию, автоматически запускают задачи улучшения, а результаты сохраняются по настроенному выходному пути.

## Запрос результатов задач

- **Callback-уведомления:** укажите `TaskNotifyConfig` в `ProcessMedia`; результаты будут отправлены в ваш callback.
- **DescribeTaskDetail:** передайте ID задачи для запроса статуса и результатов.
- **Консоль:** проверьте страницу задач обработки VOD; после успешного выполнения подзадач можно просмотреть или скачать улучшенные результаты.

## Дополнительные функции улучшения

Некоторые модели требуют серверной конфигурации. Ключевые возможности:

- **Комплексное улучшение (оптимизированное):** AI анализирует и оптимизирует контент, особенно лица, повышая чёткость и детализацию.
- **Улучшение цвета (оптимизированное):** корректирует насыщенность, контраст и яркость, устраняя искажения и приближая цвета к естественным.
- **Удаление артефактов (оптимизированное):** устраняет блочные искажения, ringing-эффекты и другие дефекты, возникшие при транскодировании.
- **Улучшение видео на базе Diffusion Transformer:** модель глубокого обучения, подходящая для восстановления старых и сильно деградированных видео за счёт использования априорной информации из foundation-моделей.

## FAQ и биллинг

Пользовательские шаблоны улучшения можно создавать через консоль или API; для настройки параметров транскодирования используйте API. Тарификация улучшения включает как стоимость обработки улучшения, так и базовые расходы на транскодирование.
